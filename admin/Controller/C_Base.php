<?phpinclude_once('Core.php');include_once('Model/Model.php');include_once('Model/M_Users.php');// базовый контроллер сайта :abstract class C_Base extends Core{	protected $title;		// заголовок страници	protected $content;		// контент страници	// конструктор :	function __construct()	{			}		// виртуальный обработчик запроса :	protected function OnInput()	{		$this->title = 'Juicebox - Xi Digital CMS';		$this->content = '';	}		// виртуальный генератор HTML :		protected function OnOutput()	{		// получаем объект класса Model :		$object = Model::Instance();		// Используем метод класса Model по выводу всех landing-секций :		$this->Sections = $object->Array_clean("SELECT s.id, sT.name                                                        FROM `sections` as s                                                        JOIN sectionsTranslate as sT on s.id = sT.id_section                                                        WHERE s.landing = 1 AND lang='".ADMIN_LANG."'                                                       GROUP by sT.id_section                                                       ORDER by s.id");		// Используем метод класса Model по выводу всех секций c разрешонными подсекциями ://		$this->Sections_sub = $object->Array_where('sections','WHERE has_subsect = 1 ORDER BY id');        $this->Sections_sub = $object->Array_clean("SELECT s.id, sT.name                                                        FROM `sections` as s                                                        JOIN sectionsTranslate as sT on s.id = sT.id_section                                                        WHERE s.has_subsect = 1 AND lang='".ADMIN_LANG."'                                                       GROUP by sT.id_section                                                       ORDER by s.id");		// менеджеры :		$mUsers = M_Users::Instance();		// текущий пользователь :        $user = $mUsers->Get();		$vars = array('title' => $this->title,						'sections' => $this->Sections,						'sections_sub' => $this->Sections_sub,												'content' => $this->content,						'user' => $user);		$page = $this->View('View/v_main.php', $vars);						echo $page;	}	}